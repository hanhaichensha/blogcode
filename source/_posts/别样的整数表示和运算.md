title: 别样的整数表示和运算
tags:
  - 计算机基础
  - 数学
categories:
  - 计算机基础
date: 2016-06-04 23:47:02
---


最近进入懒癌晚期，拖延症重症期，总惦记着让自己写点东西，然而回头一看，已经将近两个月没写东西，看书也开始打瞌睡，彻底进入老年人模式。细思极恐，鼓起勇气，把最近吹着电扇，抠着脚丫看的些东西记录一下。这文涉及的知识非常简单，主要是涉及小学整数加减运算。

本文主要是温习一下计算机基础知识，计算机的信息表示和处理基础二进制整数的表示和运算。不过，我不打算照着书本介绍一下二进制，今天我们使用我们熟知的十进制（也就是我们平时使用的数）来介绍其中的原理。这样做的好处有很多：1、对于不熟悉二进制的或者说不熟悉进制的读者也可以理解一二，而不用多费口舌去介绍进制的概念；2、使用十进制，可以让自己对书本上的原理有更好的理解；3、使用十进制，可以让自己增进对知识的迁移能力，已达到触类旁通等等。

### 1、小学一年级加法（十以内加法）

请注意了，各位童鞋，请用掰手指的方法告诉下面这道题加法题的答案

**题目1：3+5=？**


有八根手指对吧。再来

**题目2：6+7=？**


多少？13？你确定你是13吗？请问你真的有13根手指吗？反正我是只看到了3根手指，我的答案是3。这不禁让人感叹人生苦短，在有限的时间范围之内，你想得到的越多，反而拥有的会越少。一不小心又变成了鸡汤小短文，寓言小故事。
<!--more-->
### 小学二年级加减法（一百以内加减法）

一年级的太简单了，我们快速进入二年级，请听题：


**题目3：28+57=？**


答案是……，我还没算出来，容我开个挂，用计算机算一下，答案是85，各位小盘友，使用一百根火柴棒就能算出来哦(*^__^*)。接着看题：

**题目4：68+57=？**

请注意了，你只有一百根火柴棒，这次你应该能给出正确答案，答案是：25。到目前为止，你已经学会了加法了，下面来学习减法：

**题目5：68-43=？**

不啰嗦了，直接给答案：25。来一道有难度的减法：

**题目6：28-57=？**

以我小学二年级的智商，表示不知道答案。那让我们进入到高年级阶段。

### 高年级阶段（部分涉及超越了小学知识）

所谓高年级就是知道了负数这么一个概念，所以题目6的答案就是-29。既然进入了高年级，那我们来做另外一件有意思的事，把减法变成加法，省的记两种运算规则。我没来仔细看一下题目4和题目5，
**题目4：68+57=？**
**题目5：68-43=？**

这两道题根据**有限范围内**的加减法得出的结果是一样的，都是25，那我们是不是可以将题目5的减法变成题目4的加法呢？进一步，在**有限范围内**的加减法，是不是所有的减法都可以转变成加法，使用加法规则做减法运算呢？答案是肯定的，下面我们就来实现这一猜想。

我们都知道，一个数减去一个数等于一个数加上一个负数，现在的问题是怎么把这个负数表示成一个正数。你有没有发现，题目4和题目5中的第二运算数57和43的关系，这两个数加起来57+43=100，正好是我们所规定的范围（一百以内的加减法），当然，如果按照一百以内不含一百的加法计算，这个结果应该是0。找到这个规律，我们来看是不是真的是这样呢？再来验证一下，73-27=73+73=46（请注意这都是都是100以内的计算）。好像是对的，为什么了？因为100以内的加法，超过100（包括100）的数都要减去100，也就是：73-27=73+(73-100)=73+73-100，此时73+73-100正好是表达100以内的加法运算。好像有什么不对，谁能保证所有的运算都能像73+73-100这样，前两个数的和大于100呢，有没可能小于100呢？那肯定是有可能的，就拿这个例子来说，假设第一个数为x，要x+73<100，也就是x<100-73=27，也就是说x-27是一个负数，同时x+73-100也正好是一个负数，也说明这个两个数是相等的，但它还是用负数表示。综上，当y>0，x-y可以表示成x-y+100，也就是说-y用正数表示是100-y。

### 正规化阶段

经过前面一些简单的介绍，让我们来总结和归纳一下这个**在一定范围内**的加减法运算。

#### 1、让数的表示更正规化

上面提到过正数和负数的表示，以及如何将一个减法变成一个加法，然和将负数变成一个正数进行相加，且等到与加法相等的结果。现在我们将其进行更进一步的整理。

表示一个一百以内的十进制数（不包括100，当然这里所说的数是指|x|<100的数），我们只需要两个数字进行组合即可得到，考虑到有正与负数，我们多加一位表示正负，这一位可以是+、-，比如+20、-60等。我也说过了，我现在是懒癌晚期，我只想学习正数加法，我天真的把所有数都变成正数，而且只是数，连正负号都是用数字，还能表示这个数是正数还是负数，所以绝对值在100以内的数，只需要三位数表示，而且我们只用三个数表示。明确了目标，那开始吧：

100以内的正数表示：最高位用0和1表示这是一个正数，后两位表示数的大小。比如：+20表示成020。
绝对值100以内的负数的表示：最高位用8或9表示是负数，一般使用9，后两位表示数的大小，当然了为了能让负数变成正数加法，数的大小部分还是用100-数的大小部分。比如：-60表示成940（9是符号位，40=100-60）。


#### 2、让计算方法更正规化

将数的表示正规化后，我们用正规化后的数带入之前的题目中进行计算，注意符号位也当作数值进行运算，且只能保留最低三位数，看看能不能得到正确答案：

**题目3：28+57=028+057=085**
**题目4：68+57=068+057=125=025     (前面说过，0或1都表示正数，通常我们会把1变成0来表示)**
**题目5：68-43=068+957=1025（超过了3个位，把最高为丢掉）=025**
**题目6：28-57=028+943=971**
**题目7：-66-88=934+912=1846（超过了3位，把最高位丢掉）=846=946(前面说过，8或9都表示负数，通常我们会把8变成9来表示)**

题目3、4、5的结果都是正数，且结果和我们之前得到是一样的，题目6、7的结果是负数，题6值为100-71=29，所以结果是-29，也与我之前的结果一致，题7的值为-54，也是正确值。至此，我们就实现了绝对值在100以内的正负数加减法的正规化，全部简化为加法运算。

至此，可以结束本文了，不过，我们现在不禁要问，为什么我们这样做可以得到与我们以前计算方法一致的结果呢？

嗯，这个超出了小学数学知识的范畴了，我们之所以可以等到相同的结果，因为我们讨论的**在一定范围内**的带符号加法运算和**在一定范围内**的不带符号的加法运算都是一个阿贝尔群，还具有相同的单位元，而且表示的范围是等价的。简单点说，我们现在讨论的整数加法是一个[阿贝尔群](https://zh.wikipedia.org/wiki/阿贝尔群)，满足（下面是个人的通俗说法，准确定义请参考相关专业书籍）：
1、封闭性：通俗说就是加数与和属于同样的一个取值域，比如绝对值100以内的加法运算，如果大于等于100我们就减去100，得到的和还是在100以内，转换成不带正负号的加法，就是计算[0,999]内的正整数加法，加数与和都是在[0,999]区间；
2、结合律：就是满足结合律，a+b+c=(a+b)+c=a+(b+c)，a、b、c是任意取值域的值;
3、单位元：就是满足，a+e=a，e+a=a，a是任意取值域的值，e就是单位元,这里两种情况的单位元都是0；
4、逆元：对取值域中的任意a，取值域中都存在b，使得a+b=单位元，b称为a的逆元。比如：绝对值100以内的加法运算，x的逆元就是-x，而在[0,999]无符号加法的x的逆元就是1000-x；
5、交换律：对取值域中的任意a、b，都有a+b=b+a。

这就是原因，估计很多小伙伴根本看不懂，只能说就当热闹看看，不要求一定弄懂。

### 衍生阶段

说了这么久，说好的计算机基础呢？为什么与计算机没半毛钱关系，鉴于此，我就简单说一下，计算机使用的是二进制，加法分为有符号和无符号正数加法。有符号的计算使用了类似上面的方法，正数最高位是0，负数最高位是1，后面的位表示值。

用一个例子说明一下：
用4位二进制表示一个数，最高位是符号位，还有3位用于表示数值，所以二进制数的取值范围是[-8,7],

**题目8：2-4=0010+1100=1110=-2**


最后强调一下，有些小伙伴说，一个数的补码很难求，其实，在二进制中的补码其实就是上面说的逆元，只要你理解了上面逆元的概念，是很好求的，比如十进制中减掉一个数，其实就是加上这个数的逆元。
举几个例子熟练一下（用4位数表示，最高位是符号位），算法就是：x逆元=10……0-x（10……0总共有最后表示数的位数个0，这里也就是4）：
-1=1的逆元=10000-1=9999
1=-1的逆元=10000-(-1)=10000+1=0001
-48=48的逆元=10000-48=9952

下面是一个二进制的例子：
-4=0100的逆元=10000-0100=1100

下面是一些计算中的补码（即逆元）的应用：
20-48=0020+(10000-48)=0020+9952=9972=-28，同样的在二进制中，2-4=0010+(10000-0100)=0010+1100=1110=-2

当然如果你学过计算机相关知识，还有一种求逆元的方法，原码（原数）取反加一即得补码（逆元），其中原码取反得到的数被成为反码。取反就是：指定的位数中的最大数-原码，什么意思，举个例子，用四位数表示下面的数的反码，由于是用四位数表示，所以四位数最大能表示的数是9999：
48的反码=9999-48=9951
根据：补码=反码+1得：
48的补码=48的反码+1=9951+1=9952=-48
同理，用二进制表示下面的数，四位最大二进制数能表示的最大数是1111：
4的反码=1111-0100=1011
4的补码=4的反码+1=1011+1=1100=-4

### 小结

在**有限范围内**的整数计算中，将负数使用补码（也就是逆元）参与运算，就能只使用加法实现有符号整数的加减法运算，这其中使用到的就是群的性质，尤其是逆元公式：x+y=e。在有符号整数计算中x+(-x)=0，而无符号整数计算有：x+(x的逆元)=0，所以我们将无符号整数中的逆元等效于有符号整数中的负数，以此达到只使用加法实现加减法运算的目的。本文还有一点没写清楚，那就是进制转换，后面几个例子中涉及十进制转二进制，留以后再写。